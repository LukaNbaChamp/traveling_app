<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åå¤å±‹æ»‘é›ª 2026 â„ï¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f0f2f5; -webkit-tap-highlight-color: transparent; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .glass { background: rgba(255, 255, 255, 0.92); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .blur-secret { filter: blur(6px); transition: filter 0.3s; cursor: pointer; user-select: none; }
        .blur-secret:active, .blur-secret.revealed { filter: blur(0); }
        .rage-meter { transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="pb-24">

    <div class="fixed top-0 w-full z-40 glass">
        <div class="flex justify-between items-center px-4 py-3">
            <div onclick="showDriverRant()">
                <h1 class="text-lg font-bold text-gray-800">åå¤å±‹æ»‘é›ª 2026 <span class="text-xs bg-red-100 text-red-600 px-1 rounded ml-1">å¸æ©Ÿæ€’æ°£å€¼ <i class="fas fa-fire"></i></span></h1>
                <p class="text-xs text-gray-500">Jan 17 - Jan 25 (9 Days)</p>
            </div>
            <a href="https://www.vjw.digital.go.jp/" target="_blank" class="bg-indigo-600 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md active:scale-95 transition-transform">
                Visit Japan
            </a>
        </div>
        
        <div class="flex overflow-x-auto hide-scrollbar px-3 pb-2 space-x-3" id="date-scroll">
            </div>
    </div>

    <div class="pt-32 px-4 space-y-5" id="itinerary-container">
        </div>

    <div class="fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around py-3 pb-6 z-50 text-xs font-medium text-gray-400">
        <button class="flex flex-col items-center text-indigo-600" onclick="switchTab('itinerary')">
            <i class="fas fa-calendar-day text-xl mb-1"></i>è¡Œç¨‹
        </button>
        <button class="flex flex-col items-center hover:text-gray-800" onclick="window.open('https://www.google.com/maps/d/u/0/', '_blank')">
            <i class="fas fa-map-marked-alt text-xl mb-1"></i>åœ°åœ–
        </button>
        <button class="flex flex-col items-center hover:text-gray-800" onclick="showSkiModal()">
            <i class="fas fa-snowflake text-xl mb-1"></i>æ•™ç·´/ç§Ÿå€Ÿ
        </button>
        <button class="flex flex-col items-center hover:text-gray-800" onclick="showChecklist()">
            <i class="fas fa-clipboard-check text-xl mb-1"></i>æ¸…å–®
        </button>
    </div>

    <div id="modal-big-card" class="fixed inset-0 bg-black/95 z-[60] hidden flex flex-col justify-center items-center p-6 text-center" onclick="closeModal('modal-big-card')">
        <div class="text-gray-400 text-sm mb-6 tracking-[0.2em] uppercase">Show to Staff</div>
        <div id="big-card-text" class="text-white text-5xl font-bold leading-snug"></div>
        <div class="mt-12 text-white/50 text-sm animate-pulse">Tap screen to close</div>
    </div>

    <div id="modal-driver" class="fixed inset-0 bg-black/80 z-[60] hidden flex items-center justify-center p-6" onclick="closeModal('modal-driver')">
        <div class="bg-white rounded-2xl p-6 w-full max-w-sm relative overflow-hidden" onclick="event.stopPropagation()">
            <div class="absolute top-0 left-0 w-full h-2 bg-gray-200"><div class="h-full bg-red-600 rage-meter" style="width: 85%"></div></div>
            <h3 class="text-xl font-bold text-gray-800 mt-2 mb-4">å¸æ©Ÿçš„å…§å¿ƒç¨ç™½ ğŸ¤¬</h3>
            <p id="driver-quote" class="text-lg text-gray-700 font-serif italic mb-6 leading-relaxed">...</p>
            <button onclick="closeModal('modal-driver')" class="w-full bg-gray-900 text-white py-3 rounded-xl font-bold">è¾›è‹¦äº†ï¼Œè«‹å–é£²æ–™ ğŸ¥¤</button>
        </div>
    </div>

    <div id="modal-ski" class="fixed inset-0 bg-black/60 z-[60] hidden flex items-end sm:items-center justify-center" onclick="closeModal('modal-ski')">
        <div class="bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-md p-6 max-h-[80vh] overflow-y-auto" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-4 flex items-center"><i class="fas fa-skiing text-blue-500 mr-2"></i>æ•™ç·´ & ç§Ÿå€Ÿæ¯”åƒ¹</h3>
            
            <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-xl">
                    <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase">æ•™ç·´æ–¹æ¡ˆ</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between items-center border-b pb-2">
                            <span>TOOMI (äº”é¾/æ ‚æ± )</span>
                            <div class="text-right">
                                <div class="font-bold">Â¥57,000</div>
                                <a href="https://toomisnow.com/bookingfunction/" target="_blank" class="text-blue-600 text-xs">é ç´„</a>
                            </div>
                        </div>
                        <div class="flex justify-between items-center border-b pb-2">
                            <span>KLOOK (å…¨æ—¥)</span>
                            <div class="text-right">
                                <div class="font-bold">NT$15,943</div>
                                <a href="https://www.klook.com/" target="_blank" class="text-blue-600 text-xs">é ç´„</a>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Tyson (å…¨æ—¥)</span>
                            <div class="text-right">
                                <div class="font-bold">NT$18,000</div>
                                <span class="text-gray-400 text-xs">SnowboardMap</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-xl">
                    <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase">è£å‚™ç§Ÿå€Ÿ (æ—¥å’Œ vs Woody)</h4>
                    <div class="grid grid-cols-3 gap-2 text-center text-xs mb-2 font-bold text-gray-400">
                        <div class="text-left">é …ç›®</div>
                        <div>æ—¥å’Œ</div>
                        <div>Woody</div>
                    </div>
                    <div class="grid grid-cols-3 gap-2 text-center text-sm border-b pb-1 mb-1">
                        <div class="text-left font-medium">æ»‘é›ªå¥—è£</div>
                        <div class="text-green-600 font-bold">Â¥9,500</div>
                        <div class="text-red-400">Â¥10,200</div>
                    </div>
                    <div class="grid grid-cols-3 gap-2 text-center text-sm">
                        <div class="text-left font-medium">é›ªè¡£é›ªè¤²</div>
                        <div class="text-red-400">Â¥8,500</div>
                        <div class="text-green-600 font-bold">Â¥7,000</div>
                    </div>
                </div>
            </div>
            <button onclick="closeModal('modal-ski')" class="mt-6 w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-bold">é—œé–‰</button>
        </div>
    </div>

    <div id="modal-checklist" class="fixed inset-0 bg-black/60 z-[60] hidden flex items-end sm:items-center justify-center" onclick="closeModal('modal-checklist')">
         <div class="bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-md p-6 h-[70vh] flex flex-col" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-4">è¡Œææª¢æŸ¥è¡¨</h3>
            <div class="flex-1 overflow-y-auto space-y-2">
                <label class="flex items-center p-3 bg-gray-50 rounded-lg">
                    <input type="checkbox" class="w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500">
                    <span class="ml-3 text-gray-700">å°ç£é§•ç…§ + æ—¥æ–‡è­¯æœ¬ (çµ•å°è¦å¸¶!!)</span>
                </label>
                <label class="flex items-center p-3 bg-gray-50 rounded-lg">
                    <input type="checkbox" class="w-5 h-5 text-indigo-600 rounded">
                    <span class="ml-3 text-gray-700">è­·ç…§ (æª¢æŸ¥æ•ˆæœŸ)</span>
                </label>
                <label class="flex items-center p-3 bg-gray-50 rounded-lg">
                    <input type="checkbox" class="w-5 h-5 text-indigo-600 rounded">
                    <span class="ml-3 text-gray-700">ESIM è¨­å®š / æ¼«éŠé–‹é€š</span>
                </label>
                <label class="flex items-center p-3 bg-gray-50 rounded-lg">
                    <input type="checkbox" class="w-5 h-5 text-indigo-600 rounded">
                    <span class="ml-3 text-gray-700">é›ªå ´å¢¨é¡/é˜²æ›¬ (é‡è¦)</span>
                </label>
                 <label class="flex items-center p-3 bg-gray-50 rounded-lg">
                    <input type="checkbox" class="w-5 h-5 text-indigo-600 rounded">
                    <span class="ml-3 text-gray-700">ä¹³æ¶²/è­·å”‡è† (æ—¥æœ¬å¾ˆä¹¾)</span>
                </label>
            </div>
             <button onclick="closeModal('modal-checklist')" class="mt-4 w-full bg-indigo-600 text-white py-3 rounded-xl font-bold">å®Œæˆ</button>
         </div>
    </div>

    <script>
        // === è³‡æ–™ä¸­å¿ƒ (Links Updated to Real Google Maps Queries) ===
        const tripData = [
            {
                date: "1/17",
                day: "Day 1",
                week: "å…­",
                city: "Takayama",
                weatherCity: "Takayama",
                events: [
                    { time: "06:45", title: "æŠµé” åå¤å±‹ (MM722)", type: "flight", desc: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ T1 / æ¨‚æ¡ƒèˆªç©º" },
                    { time: "08:00", title: "å–è»Š (ORIX Rent-A-Car)", type: "car", desc: "å‚™å¦¥é§•ç…§è­¯æœ¬", ps: "ã‚ªãƒªãƒƒã‚¯ã‚¹ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼äºˆç´„", link: "https://www.google.com/maps/search/?api=1&query=ORIX+Rent-A-Car+Chubu+Airport" },
                    { time: "12:00", title: "é«˜å±±è€è¡— åˆé¤", type: "food", desc: "é£›é©’ç‰›æ¡å£½å¸ / é€›è¡—", link: "https://www.google.com/maps/search/?api=1&query=Takayama+Old+Town" },
                    { time: "15:00", title: "Check-in: é£›é©’èŠ±é‡Œä¹‹æ¹¯", type: "hotel", desc: "é«˜å±±æ«»åºµ (æš«å®š)", ps: "ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãŠé¡˜ã„ã—ã¾ã™", link: "https://www.google.com/maps/search/?api=1&query=Takayama+Ouan" }
                ]
            },
            {
                date: "1/18",
                day: "Day 2",
                week: "æ—¥",
                city: "Shirakawa",
                weatherCity: "Gujo",
                events: [
                    { time: "05:00", title: "èµ·åºŠ", type: "other", desc: "æ—©èµ·ç—›è‹¦ä½†å€¼å¾—" },
                    { time: "06:00", title: "å‡ºç™¼å‰å¾€ ç™½å·é„‰", type: "car", desc: "è»Šç¨‹ç´„ 1 å°æ™‚" },
                    { time: "07:00", title: "ç™½å·é„‰åˆæŒæ‘", type: "sight", desc: "ä¸–ç•Œéºç”¢ / æ‹ç…§", link: "https://www.google.com/maps/search/?api=1&query=Shirakawa-go" },
                    { time: "12:00", title: "å‰å¾€ å¥§é£›é©’å¹³æ¹¯", type: "drive", desc: "æº«æ³‰å€ç§»å‹•", link: "https://www.google.com/maps/search/?api=1&query=Hirayu+Onsen" }
                ]
            },
            {
                date: "1/19",
                day: "Day 3",
                week: "ä¸€",
                city: "Okuhida",
                weatherCity: "Takayama",
                events: [
                    { time: "10:00", title: "æ–°ç©—é«˜çºœè»Š", type: "sight", desc: "è§€æ™¯å°åƒè‰è“å†°æ·‡æ·‹ ğŸ¦", secret: "çºœè»Šä¸Šå»è§€æ™¯å°åšæ„›...æœ«ç­è»Š16:15è¦æ³¨æ„", link: "https://www.google.com/maps/search/?api=1&query=Shinhotaka+Ropeway" },
                    { time: "15:00", title: "å‰å¾€ æ¾æœ¬ (Matsumoto)", type: "drive", desc: "ç§»å‹•æ—¥", link: "https://www.google.com/maps/search/?api=1&query=Matsumoto+Station" }
                ]
            },
            {
                date: "1/20",
                day: "Day 4",
                week: "äºŒ",
                city: "Tsugaike",
                weatherCity: "Otari",
                events: [
                    { time: "09:00", title: "æ ‚æ± é«˜åŸæ»‘é›ªå ´", type: "ski", desc: "åˆå­¸è€…å‹å–„ / é˜é³´ä¹‹ä¸˜", link: "https://www.google.com/maps/search/?api=1&query=Tsugaike+Mountain+Resort" },
                    { time: "12:00", title: "åˆé¤ & ä¼‘æ¯", type: "food", desc: "é›ªå ´é£Ÿå ‚" },
                    { time: "18:00", title: "æ™šé¤", type: "food", desc: "å‘¨é‚Šé¤å»³" }
                ]
            },
            {
                date: "1/21",
                day: "Day 5",
                week: "ä¸‰",
                city: "Hakuba",
                weatherCity: "Hakuba",
                events: [
                    { time: "09:00", title: "ç™½é¦¬å²©å²³ Mountain Harbor", type: "ski", desc: "çµ•ç¾é¦éŸ† / City Bakery", link: "https://www.google.com/maps/search/?api=1&query=Hakuba+Iwatake+Mountain+Resort" },
                    { time: "15:00", title: "å‰å¾€ ä¿¡æ¿ƒ (Shinano)", type: "drive", desc: "å¾€åŒ—ç§»å‹•" }
                ]
            },
            {
                date: "1/22",
                day: "Day 6",
                week: "å››",
                city: "Nojiri",
                weatherCity: "Nagano",
                events: [
                    { time: "11:00", title: "æˆ¶éš±ç¥ç¤¾ / é‡å°»æ¹–", type: "sight", desc: "é‡£é­š / æ¡‘æ‹¿ ğŸ§–", secret: "æ‰¾æ¡‘æ‹¿è’¸ä¸€ä¸‹åšæ„› ğŸ£ğŸ§–â™¨ï¸", link: "https://www.google.com/maps/search/?api=1&query=Togakushi+Shrine" },
                    { time: "16:00", title: "å‰å¾€ åœ°ç„è°·å€åŸŸ", type: "drive", desc: "æº–å‚™æ˜å¤©çœ‹çŒ´å­" }
                ]
            },
            {
                date: "1/23",
                day: "Day 7",
                week: "äº”",
                city: "Jigokudani",
                weatherCity: "Nagano",
                events: [
                    { time: "09:00", title: "åœ°ç„è°·é‡çŒ¿å…¬è‹‘", type: "sight", desc: "çŒ´å­æ³¡æº«æ³‰ ğŸ’", link: "https://www.google.com/maps/search/?api=1&query=Jigokudani+Yaen+Koen" },
                    { time: "14:00", title: "å‰å¾€ é‡‘æ¾¤", type: "drive", desc: "é•·é€”é§•é§›é–‹å§‹...", rant: "é–‹å»é‡‘æ¾¤æˆ‘æ“ä½ åª½ä½ å€‘æœ€å¥½éƒ½è«‹æˆ‘åƒé£¯æˆ‘é–‹è»Šå¾ˆç´¯é‚„å®‰æ’è¡Œç¨‹æ“", link: "https://www.google.com/maps/search/?api=1&query=Kanazawa+Station" }
                ]
            },
            {
                date: "1/24",
                day: "Day 8",
                week: "å…­",
                city: "Nagoya",
                weatherCity: "Nagoya",
                events: [
                    { time: "10:00", title: "å‰åœåŠ›å…¬åœ’ / åå¤å±‹å¸‚å€", type: "sight", desc: "å¤§å€‰åº« / é€›è¡—", ps: "ãƒã‚±ãƒƒãƒˆæç¤º", link: "https://www.google.com/maps/search/?api=1&query=Ghibli+Park" },
                    { time: "16:00", title: "é–‹è»Šå›åå¤å±‹", type: "drive", desc: "å¸‚å€é‚„è»Š", rant: "é–‹è»Šå»åå¤å±‹æˆ‘çœŸçš„è¦ºå¾—ä½ å€‘è¦çµ¦æˆ‘éŒ¢æˆ–æ˜¯çµ¦æˆ‘æ“æˆ‘ä»–åª½è¶…ç´¯è¶…å¿™é‚„å……ç•¶ç¿»è­¯é§•é§›å°éŠæ»‘é›ªæ•™ç·´å»šå¸«æˆ‘å¹¹ä½ å¨˜", link: "https://www.google.com/maps/search/?api=1&query=Nagoya+Station" },
                    { time: "19:00", title: "å¤§é ˆè§€éŸ³å•†åº—è¡—", type: "shop", desc: "æœ€å¾Œæ¡è²·", link: "https://www.google.com/maps/search/?api=1&query=Osu+Shopping+District" }
                ]
            },
            {
                date: "1/25",
                day: "Day 9",
                week: "æ—¥",
                city: "Nagoya",
                weatherCity: "Nagoya",
                events: [
                    { time: "11:00", title: "å¸‚å€è‡ªç”±æ´»å‹•", type: "shop", desc: "åƒæ—©é¤ / æ•´ç†è¡Œæ" },
                    { time: "19:00", title: "å‰å¾€ ä¸­éƒ¨åœ‹éš›æ©Ÿå ´", type: "transport", desc: "åéµ Î¼-SKY", link: "https://www.google.com/maps/search/?api=1&query=Chubu+Centrair+International+Airport" },
                    { time: "22:45", title: "èµ·é£› (MM723)", type: "flight", desc: "å›å®¶é¢å°ç¾å¯¦" }
                ]
            }
        ];

        const driverRants = [
            "é–‹è»Šå»åå¤å±‹æˆ‘çœŸçš„è¦ºå¾—ä½ å€‘è¦çµ¦æˆ‘éŒ¢æˆ–æ˜¯çµ¦æˆ‘æ“æˆ‘ä»–åª½è¶…ç´¯è¶…å¿™è¿˜å……ç•¶ç¿»è­¯é§•é§›å°éŠæ»‘é›ªæ•™ç·´å»šå¸«æˆ‘å¹¹ä½ å¨˜",
            "é–‹å»é‡‘æ¾¤æˆ‘æ“ä½ åª½ä½ å€‘æœ€å¥½éƒ½è«‹æˆ‘åƒé£¯æˆ‘é–‹è»Šå¾ˆç´¯é‚„å®‰æ’è¡Œç¨‹æ“",
            "ç‚ºä»€éº¼åªæœ‰æˆ‘è¦è² è²¬é–‹è»Šé‚„è¦è² è²¬è¨‚ä½ï¼Ÿ",
            "é€™é›ªåœ°é–‹è»Šå¾ˆæ»‘ä½ å€‘çŸ¥é“å—ï¼Ÿç¡ç¡ç¡å°±çŸ¥é“ç¡ï¼"
        ];

        // === æ ¸å¿ƒé‚è¼¯ ===
        let currentDayIdx = 0;

        function init() {
            renderTabs();
            renderDay(0);
        }

        function renderTabs() {
            const container = document.getElementById('date-scroll');
            container.innerHTML = tripData.map((d, i) => `
                <button onclick="renderDay(${i})" class="flex-shrink-0 flex flex-col items-center justify-center w-14 h-16 rounded-xl transition-all ${i === currentDayIdx ? 'bg-indigo-600 text-white shadow-lg scale-105' : 'bg-white text-gray-500 border border-gray-100'}">
                    <span class="text-[10px] font-bold uppercase tracking-wider">${d.day}</span>
                    <span class="text-lg font-bold leading-none mt-1">${d.date.split('/')[1]}</span>
                    <span class="text-[10px] opacity-80 mt-1">${d.week}</span>
                </button>
            `).join('');
        }

        async function renderDay(idx) {
            currentDayIdx = idx;
            renderTabs(); 
            const day = tripData[idx];
            const container = document.getElementById('itinerary-container');
            
            // Fetch Weather (Same logic)
            let temp = "--";
            try {
                const latLong = { 'Nagoya': '35.18,136.90', 'Takayama': '36.14,137.25', 'Hakuba': '36.69,137.86', 'Kanazawa': '36.56,136.65', 'Gujo': '35.75,136.96' };
                const coords = latLong[day.weatherCity] || latLong['Nagoya'];
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${coords.split(',')[0]}&longitude=${coords.split(',')[1]}&current_weather=true`);
                const data = await res.json();
                temp = Math.round(data.current_weather.temperature);
            } catch(e) {}

            let html = `
                <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex justify-between items-center relative overflow-hidden">
                    <div class="relative z-10">
                        <div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-1">${day.city} Weather</div>
                        <div class="flex items-baseline space-x-2">
                            <span class="text-4xl font-bold text-gray-800">${temp}Â°</span>
                            <span class="text-sm text-gray-500">æ™´æ™‚å¤šé›²</span>
                        </div>
                    </div>
                    <div class="text-6xl text-yellow-400 opacity-20 absolute -right-2 -top-2"><i class="fas fa-sun"></i></div>
                </div>
            `;

            html += day.events.map(ev => `
                <div class="flex gap-4">
                    <div class="flex flex-col items-center w-12 pt-1">
                        <span class="text-sm font-bold text-gray-600">${ev.time}</span>
                        <div class="w-0.5 h-full bg-gray-200 mt-2 rounded-full relative">
                            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full ${getDotColor(ev.type)}"></div>
                        </div>
                    </div>
                    <div class="flex-1 pb-6 relative">
                        <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 ${getBorderColor(ev.type)} relative overflow-hidden group active:scale-[0.98] transition-transform">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-bold text-gray-800 text-lg leading-tight pr-6">${ev.title}</h3>
                                <div class="text-gray-300 text-xl">${getIcon(ev.type)}</div>
                            </div>
                            
                            <p class="text-sm text-gray-500 mb-3">${ev.desc}</p>

                            ${ev.secret ? `
                                <div class="mt-2 p-3 bg-pink-50 rounded-lg text-pink-800 text-sm font-medium blur-secret relative" onclick="this.classList.toggle('revealed')">
                                    <div class="absolute inset-0 flex items-center justify-center text-xs text-pink-400 font-bold uppercase tracking-widest pointer-events-none z-10">Tap to Reveal â¤ï¸</div>
                                    ${ev.secret}
                                </div>
                            ` : ''}

                            <div class="flex gap-2 mt-3">
                                <!-- UPDATED LINK LOGIC: Using <a> tag instead of <button onclick> for better mobile linking -->
                                ${ev.link ? `
                                <a href="${ev.link}" target="_blank" class="flex-1 bg-gray-50 hover:bg-gray-100 py-2 rounded-lg text-xs font-bold text-gray-600 flex items-center justify-center decoration-0">
                                    <i class="fas fa-location-arrow mr-1"></i>å°èˆª
                                </a>` : ''}
                                
                                ${ev.ps ? `<button onclick="showBigCard('${ev.ps}')" class="flex-1 bg-indigo-50 hover:bg-indigo-100 py-2 rounded-lg text-xs font-bold text-indigo-600"><i class="fas fa-expand mr-1"></i>å¤§å­—å¡</button>` : ''}
                                ${ev.rant ? `<button onclick="showDriverRant('${ev.rant}')" class="w-10 bg-red-50 hover:bg-red-100 rounded-lg text-red-500 flex items-center justify-center"><i class="fas fa-angry"></i></button>` : ''}
                                ${ev.type === 'ski' ? `<button onclick="showSkiModal()" class="flex-1 bg-blue-50 hover:bg-blue-100 py-2 rounded-lg text-xs font-bold text-blue-600"><i class="fas fa-tags mr-1"></i>æ¯”åƒ¹</button>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = html;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // === å·¥å…·å‡½å¼ ===
        function getDotColor(t) {
            return ({ flight:'bg-purple-400', car:'bg-blue-400', ski:'bg-cyan-400', hotel:'bg-pink-400', food:'bg-orange-400' }[t] || 'bg-gray-400');
        }
        function getBorderColor(t) {
            return ({ flight:'border-purple-500', car:'border-blue-500', ski:'border-cyan-500', hotel:'border-pink-500', food:'border-orange-500' }[t] || 'border-gray-300');
        }
        function getIcon(t) {
            return ({ flight:'<i class="fas fa-plane"></i>', car:'<i class="fas fa-car"></i>', ski:'<i class="fas fa-snowflake"></i>', hotel:'<i class="fas fa-bed"></i>', food:'<i class="fas fa-utensils"></i>' }[t] || '<i class="fas fa-map-pin"></i>');
        }

        // === Modal Controls ===
        function showBigCard(text) {
            document.getElementById('big-card-text').innerText = text;
            document.getElementById('modal-big-card').classList.remove('hidden');
        }
        function showDriverRant(text) {
            const quote = text || driverRants[Math.floor(Math.random() * driverRants.length)];
            document.getElementById('driver-quote').innerText = `"${quote}"`;
            document.getElementById('modal-driver').classList.remove('hidden');
        }
        function showSkiModal() { document.getElementById('modal-ski').classList.remove('hidden'); }
        function showChecklist() { document.getElementById('modal-checklist').classList.remove('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }
        
        init();
    </script>
</body>
</html>
